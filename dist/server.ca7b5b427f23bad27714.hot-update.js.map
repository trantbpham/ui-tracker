{"version":3,"sources":["webpack:///./server/uiserver.js"],"names":["app","express","SourceMapSupport","install","dotenv","config","enableHMR","process","env","ENABLE_HMR","console","log","webpack","require","devMiddleware","hotMiddleware","entry","push","plugins","HotModuleReplacementPlugin","compiler","use","static","apiProxyTarget","API_PROXY_TARGET","proxy","target","changeOrigin","UI_API_ENDPOINT","UI_SERVER_API_ENDPOINT","UI_AUTH_ENDPOINT","get","req","res","GOOGLE_CLIENT_ID","send","JSON","stringify","next","render","port","PORT","listen","module","hot","accept"],"mappings":"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","file":"server.ca7b5b427f23bad27714.hot-update.js","sourcesContent":["import dotenv from 'dotenv';\r\nimport express from 'express';\r\nimport proxy from 'http-proxy-middleware';\r\nimport SourceMapSupport from 'source-map-support';\r\n\r\nimport render from './render.jsx';\r\n\r\nconst app = express();\r\n\r\nSourceMapSupport.install();\r\ndotenv.config();\r\nconst enableHMR = (process.env.ENABLE_HMR || 'true') === 'true';\r\n\r\nif (enableHMR && (process.env.NODE_ENV !== 'production')) {\r\n  console.log('Adding dev middlware, enabling HMR');\r\n  /* eslint \"global-require\": \"off\" */\r\n  /* eslint \"import/no-extraneous-dependencies\": \"off\" */\r\n  const webpack = require('webpack');\r\n  const devMiddleware = require('webpack-dev-middleware');\r\n  const hotMiddleware = require('webpack-hot-middleware');\r\n\r\n  const config = require('../webpack.config.js')[0];\r\n  config.entry.app.push('webpack-hot-middleware/client');\r\n  config.plugins = config.plugins || [];\r\n  config.plugins.push(new webpack.HotModuleReplacementPlugin());\r\n\r\n  const compiler = webpack(config);\r\n  app.use(devMiddleware(compiler));\r\n  app.use(hotMiddleware(compiler));\r\n}\r\n\r\napp.use(express.static('public'));\r\n\r\nconst apiProxyTarget = process.env.API_PROXY_TARGET;\r\nif (apiProxyTarget) {\r\n  app.use('/graphql', proxy({ target: apiProxyTarget, changeOrigin: true }));\r\n  app.use('/auth', proxy({ target: apiProxyTarget, changeOrigin: true }));\r\n}\r\n\r\nif (!process.env.UI_API_ENDPOINT) {\r\n  process.env.UI_API_ENDPOINT = 'http://localhost:3000/graphql';\r\n}\r\n\r\nif (!process.env.UI_SERVER_API_ENDPOINT) {\r\n  process.env.UI_SERVER_API_ENDPOINT = process.env.UI_API_ENDPOINT;\r\n}\r\n\r\nif (!process.env.UI_AUTH_ENDPOINT) {\r\n  process.env.UI_AUTH_ENDPOINT = 'http://localhost:3000/auth';\r\n}\r\n\r\napp.get('/env.js', (req, res) => {\r\n  const env = {\r\n    UI_API_ENDPOINT: process.env.UI_API_ENDPOINT,\r\n    UI_AUTH_ENDPOINT: process.env.UI_AUTH_ENDPOINT,\r\n    GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\r\n  };\r\n  res.send(`window.ENV = ${JSON.stringify(env)}`);\r\n});\r\n\r\napp.get('*', (req, res, next) => {\r\n  render(req, res, next);\r\n});\r\n\r\nconst port = process.env.PORT || 8000;\r\n\r\napp.listen(port, () => {\r\n  console.log(`UI started on port ${port}`);\r\n});\r\n\r\nif (module.hot) {\r\n  module.hot.accept('./render.jsx');\r\n}"],"sourceRoot":""}